C51 COMPILER V9.01   1                                                                     10/04/2012 10:53:30 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 1
OBJECT MODULE PLACED IN 1.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE 1.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*****12M¾§Õñstc89c52µ¥Æ¬»ú*********************/
   2          
   3          
   4          #include<stc12.h>
   5          #define uint unsigned int
   6          #define uchar unsigned char
   7          uchar table[]={"i love you my love"};
   8          uchar i;
   9          
  10          sbit e_clk=P3^7;  //´®ÐÐÊ±ÖÓÐÅºÅ
  11          sbit rw_sid=P3^6; //´®ÐÐÊý¾ÝÏß
  12                   
  13          void  delay_50us(uint j)   //ÑÓÊ±50uS  
  14              {   
  15   1              uint  i; 
  16   1              for(; j>0; j--); 
  17   1              for(i=19; i>0; i--);  
  18   1          }
  19          
  20          //´®ÐÐ·¢ËÍÒ»×Ö½ÚÊý¾Ý   
  21          void send_byte(uchar  dat)   
  22              {   
  23   1                       uchar i;   
  24   1                       for(i=0;i<8;i++)   
  25   1                      {   
  26   2                        e_clk=0;   
  27   2                        if(dat&0x80)//¶ÁÈ¡×î¸ßÎ»µÄÖµÈç¹ûÊÇ1Ôòrw_sidÎª1£¬·ñÔòrw_sidÎª0£»
  28   2                        rw_sid=1;
  29   2                        else     
  30   2                        rw_sid=0; 
  31   2                                        e_clk=1;   
  32   2                        dat=dat<<1; //ÓÒÒÆÒ»Î»  
  33   2                       }   
  34   1          } 
  35          
  36          //Ð´¿ØÖÆÃüÁî·ÖÈý¸ö×Ö½ÚÐ´  
  37          void     write_com(uchar  dat)   
  38              {
  39   1                    send_byte(0xF8);//´®¿Ú¿ØÖÆ¸ñÊ½ 1111 1000     RW=0,RS=0  RW=0±íÊ¾Êý¾Ý´ÓMCUÐ´µ½LCD RS=0±íÊ¾Êý¾
             -ÝÊÇ¿ØÖÆÖ¸Áî 
  40   1                    send_byte(dat&0xF0);//²¢ÐÐ8Î»Êý¾Ý¸ß4Î»¸ñÊ½ 1111 0000  µÍËÄÎ»ÖÃ0  RW=1±íÊ¾Êý¾Ý´ÓLCDÐ´µ½MCD RS
             -=1±íÊ¾ÏÔÊ¾Êý¾Ý 
  41   1                    send_byte((dat&0x0F)<<4);//²¢ÐÐ8Î»Êý¾ÝµÍ4Î»¸ñÊ½ ¸ßËÄÎ»ÖÃ0 0000 1111  ×óÒÆ4Î»ºóÎ»1111 0000 
  42   1                                
  43   1          }
  44          
  45          
  46          //Ð´ÏÔÊ¾Êý¾Ý»òµ¥×Ö½Ú×Ö·û   
  47          void     write_data(uchar dat)   
  48              
  49              {         send_byte(0xFA);//1111 1010     RW=0,RS=1   
  50   1                    send_byte(dat&0xF0);//¸ßËÄÎ»   
  51   1                    send_byte((dat&0x0F)<<4);//µÍËÄÎ»  
  52   1          }
  53          
C51 COMPILER V9.01   1                                                                     10/04/2012 10:53:30 PAGE 2   

  54           
  55          
  56          
  57           //³õÊ¼»¯     LCM   
  58          void     init_12864(void)   
  59              {   
  60   1                   delay_50us(100); //³õÊ¼»¯µÈ´ýÊ±¼ä40ms  
  61   1                   write_com(0x30);//¹¦ÄÜÉèÖÃ£¬Ò»´ÎËÍ8Î»Êý¾Ý£¬»ù±¾Ö¸Áî¼¯   
  62   1                   delay_50us(3);     //µÈ´ýÊÇ¼äÒª´óÓÚ100¸öus
  63   1                               write_com(0x30);//¹¦ÄÜÉèÖÃ£¬Ò»´ÎËÍ8Î»Êý¾Ý£¬»ù±¾Ö¸Áî¼¯ 
  64   1                               delay_50us(2); //µÈ´ýÊÇ¼äÒª´óÓÚ37¸öus 
  65   1                               write_com(0x0C);//0000,1100       ÕûÌåÏÔÊ¾£¬ÓÎ±êoff£¬ÓÎ±êÎ»ÖÃoff 
  66   1                               delay_50us(3); //µÈ´ýÊÇ¼äÒª´óÓÚ37¸öus  
  67   1                   write_com(0x01);//0000,0001     ÇåÆÁ   
  68   1                   delay_50us(200);   //µÈ´ýÊ±¼ä´óÓÚ10ms
  69   1                               write_com(0x06);//0000,0010     DDRAMµØÖ·¹éÎ»   
  70   1                   delay_50us(10);
  71   1          }
  72          
  73           
  74          
  75           main(void)   
  76              { 
  77   1                init_12864();
  78   1              while(1)
  79   1              { 
  80   2              write_com(0x80);
  81   2              delay_50us(2);
  82   2              for(i=0;i<16;i++)
  83   2              {
  84   3              write_data(table[i]);
  85   3              }
  86   2              //write_data(0x31);
  87   2               }
  88   1              
  89   1              }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    195    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     20    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
