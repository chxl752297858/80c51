C51 COMPILER V9.00   MAIN                                                                  10/04/2011 23:32:54 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\installs soft disk\Keil C51\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /****12M晶振下89c52单片机lcd1602驱动程序*************/
   2          
   3          
   4          #include <reg52.h>
   5          #define uchar unsigned char
   6          #define uint unsigned int
   7          uchar table[]={"i love you dear!"};
   8          uint i;
   9          
  10          sbit rs=P3^5;    
  11          sbit rw=P3^6;
  12          sbit e=P3^7;
  13          
  14          
  15          void delay_50us(uint t)  //延时50US
  16          {uchar j;
  17   1      for(;t>0;t--)
  18   1      for(j=19;j>0;j--);
  19   1      }
  20          
  21          void write_com(uchar com)  //写数据  
  22          {
  23   1      e=0;
  24   1      rs=0;
  25   1      rw=0;
  26   1      P1=com;
  27   1      delay_50us(10);
  28   1      e=1;
  29   1      delay_50us(20);
  30   1      e=0;
  31   1      }
  32          
  33          void write_data(uchar dat) //写指令
  34          {
  35   1      e=0;
  36   1      rs=1;
  37   1      rw=0;
  38   1      P1=dat;
  39   1      e=1;
  40   1      delay_50us(10);
  41   1      e=0;
  42   1      delay_50us(20);
  43   1      }
  44          
  45          void init_1602(void)  //初始化
  46          {   delay_50us(300); //延时15毫秒
  47   1          write_com(0x38);//不检测忙信号
  48   1          delay_50us(100);//延时5毫秒
  49   1          write_com(0x38);//不检测忙信号
  50   1          delay_50us(100);//延时5毫秒
  51   1              write_com(0x38);//不检测忙信号
  52   1              write_com(0x38);//显示模式设置
  53   1          write_com(0x08);//显示关闭
  54   1          write_com(0x01);//显示清屏
  55   1          write_com(0x06);//显示光标移动设置  
C51 COMPILER V9.00   MAIN                                                                  10/04/2011 23:32:54 PAGE 2   

  56   1          write_com(0x0c);//显示开及光标移动设置
  57   1      }
  58          
  59          
  60          void  main()  //主函数
  61          {
  62   1      
  63   1       
  64   1       init_1602();
  65   1      
  66   1       
  67   1       while(1)
  68   1          {
  69   2               write_com(0x80);
  70   2               for(i=0;i<16;i++)
  71   2               {
  72   3      
  73   3               write_data(table[i]);
  74   3               delay_50us(4);
  75   3               }
  76   2               }
  77   1      
  78   1      }
  79           
  80          
  81          
  82          
  83          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    170    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     19    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
