C51 COMPILER V9.01   MAIN                                                                  10/13/2012 00:26:26 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /****12M晶振下89c52单片机lcd1602驱动程序*************/
   2          
   3          
   4          #include <reg52.h>
   5          #define uchar unsigned char
   6          #define uint unsigned int
   7          
   8          sbit rs=P3^5;    
   9          sbit rw=P3^6;
  10          sbit e=P3^7;
  11          
  12          
  13          void delay_50us(uint t)  //延时50US
  14          {uchar j;
  15   1      for(;t>0;t--)
  16   1      for(j=19;j>0;j--);
  17   1      }
  18          
  19          void write_com(uchar com)  //写数据  
  20          {
  21   1      e=0;
  22   1      rs=0;
  23   1      rw=0;
  24   1      P1=com;
  25   1      delay_50us(10);
  26   1      e=1;
  27   1      delay_50us(20);
  28   1      e=0;
  29   1      }
  30          
  31          void write_data(uchar dat) //写指令
  32          {
  33   1      e=0;
  34   1      rs=1;
  35   1      rw=0;
  36   1      P1=dat;
  37   1      e=1;
  38   1      delay_50us(10);
  39   1      e=0;
  40   1      delay_50us(20);
  41   1      }
  42          
  43          void init_1602(void)  //初始化
  44          {   delay_50us(300); //延时15毫秒
  45   1          write_com(0x38);//不检测忙信号
  46   1          delay_50us(100);//延时5毫秒
  47   1          write_com(0x38);//不检测忙信号
  48   1          delay_50us(100);//延时5毫秒
  49   1              write_com(0x38);//不检测忙信号
  50   1              write_com(0x38);//显示模式设置
  51   1          write_com(0x08);//显示关闭
  52   1          write_com(0x01);//显示清屏
  53   1          write_com(0x06);//显示光标移动设置  
  54   1          write_com(0x0c);//显示开及光标移动设置
  55   1      }
C51 COMPILER V9.01   MAIN                                                                  10/13/2012 00:26:26 PAGE 2   

  56          
  57          
  58          void  main()  //主函数
  59          {
  60   1      
  61   1       
  62   1       init_1602();
  63   1      
  64   1       
  65   1       while(1)
  66   1          {
  67   2               write_com(0x80);
  68   2               delay_50us(4);
  69   2               write_data(0x32);
  70   2               }
  71   1      
  72   1      }
  73           
  74          
  75          
  76          
  77          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    143    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
